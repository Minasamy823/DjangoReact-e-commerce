{"ast":null,"code":"var _jsxFileName = \"/home/mina/environments/djangoreactproject/frontend/src/Components/Createuser/Login.js\";\nimport React, { Component } from 'react';\nimport Customerservices from \"./Customerservices\";\nimport axios from 'axios';\nimport { Button, Form, Grid, Image, Message, Segment } from 'semantic-ui-react';\nimport { Dimmer, Loader } from 'semantic-ui-react';\nimport Header from '../Header/Header';\nimport './Login.css';\nimport Footer from '../Footer/Footer';\nimport { Redirect } from 'react-router-dom';\nconst customerservices = new Customerservices();\nexport default class Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      Email: \"\",\n      passw: \"\",\n      emailerror: \"\",\n      passwerror: \"\"\n    };\n\n    this.emailhandler = event => {\n      this.setState({\n        Email: event.target.value\n      });\n    };\n\n    this.passwhandler = event => {\n      this.setState({\n        passw: event.target.value\n      });\n    };\n\n    this.validation = () => {\n      let emailerror = \"\";\n      let passwerror = \"\";\n\n      if (!this.state.Email || !this.state.Email.includes('@') || !this.state.Email.includes('.') || !this.state.Email.includes('com')) {\n        emailerror = \"Invalid Email\";\n      }\n\n      if (!this.state.passw || this.state.passw.length < 8) {\n        passwerror = \"Password should be at least 8 characs\";\n      }\n\n      if (emailerror || passwerror) {\n        this.setState({\n          emailerror,\n          passwerror\n        });\n        return false;\n      }\n\n      return true;\n    };\n\n    this.redirection = () => React.createElement(Redirect, {\n      to: \"/Home \",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    });\n\n    this.sendingdata = () => {\n      customerservices.login({\n        'username': this.state.Email,\n        'password': this.state.passw\n      }).then(res => {\n        const token = res.data.token; // you should firstly fetch the token from the data to be known\n\n        localStorage.setItem('id_token', token); // Store token\n      }).then(result => {\n        console.log(result);\n        alert(\"Loggedin\");\n      }).catch(error => {\n        console.log(error);\n        alert(\"This email already exists\");\n      });\n      this.redirection();\n    };\n\n    this.submithandle = e => {\n      e.preventDefault();\n      let validate = this.validation();\n\n      if (validate) {\n        this.setState({\n          emailerror: \"\"\n        });\n        this.setState({\n          passwerror: \"\"\n        });\n      }\n\n      if (this.state.Email.length > 1 && this.state.passw.length > 1) {\n        this.sendingdata();\n      }\n    };\n  }\n\n  render() {\n    const token = localStorage.getItem(\"id_token\");\n    return React.createElement(\"form\", {\n      onSubmit: this.submithandle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(Header, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"Container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"h\", {\n      className: \"h_login\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \" Login \"), React.createElement(\"h\", {\n      className: \"h_slash\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, \" / \"), React.createElement(\"h\", {\n      className: \"h_register\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"a\",\n      href: \"register\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, \"Register\")), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, \" Email \"), React.createElement(\"input\", {\n      className: \"Input\",\n      type: \"text\",\n      value: this.state.Email,\n      onChange: this.emailhandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \" \", this.state.emailerror), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, \" Password \"), React.createElement(\"input\", {\n      className: \"Input\",\n      type: \"Password\",\n      value: this.state.Passw,\n      onChange: this.passwhandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        color: \"red\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, \" \", this.state.passwerror), React.createElement(\"div\", {\n      className: \"button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, !token ? React.createElement(\"button\", {\n      class: \"ui inverted orange button\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"Login\") : React.createElement(Button, {\n      converted: true,\n      color: \"orange\",\n      disabled: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }, \"Login\"))), React.createElement(\"div\", {\n      className: \"Footer2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(Footer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    })));\n  }\n\n}","map":{"version":3,"sources":["/home/mina/environments/djangoreactproject/frontend/src/Components/Createuser/Login.js"],"names":["React","Component","Customerservices","axios","Button","Form","Grid","Image","Message","Segment","Dimmer","Loader","Header","Footer","Redirect","customerservices","Login","state","Email","passw","emailerror","passwerror","emailhandler","event","setState","target","value","passwhandler","validation","includes","length","redirection","sendingdata","login","then","res","token","data","localStorage","setItem","result","console","log","alert","catch","error","submithandle","e","preventDefault","validate","render","getItem","color","Passw"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport Customerservices from \"./Customerservices\";\nimport axios from 'axios';\nimport { Button, Form, Grid, Image, Message, Segment } from 'semantic-ui-react'\nimport { Dimmer, Loader } from 'semantic-ui-react';\nimport Header from '../Header/Header';\nimport './Login.css';\nimport Footer from '../Footer/Footer';\nimport { Redirect } from 'react-router-dom'\n\nconst customerservices = new Customerservices();\n\nexport default class Login extends Component{\n\n  state={\n\n    Email:\"\",\n    passw:\"\",\n    emailerror:\"\",\n    passwerror:\"\",\n\n  }\n\n\n\n  emailhandler =(event)=>{\n    this.setState({Email:event.target.value})\n  }\n  passwhandler =(event)=>{\n    this.setState({passw:event.target.value})\n  }\n\n\n  validation=()=>{\n\n      let emailerror = \"\";\n      let passwerror = \"\";\n\n\n\n      if (!this.state.Email || !this.state.Email.includes('@') || !this.state.Email.includes('.')||!this.state.Email.includes('com')) {\n        emailerror=\"Invalid Email\"\n      }\n      if (!this.state.passw ||this.state.passw.length < 8) {\n        passwerror=\"Password should be at least 8 characs\"\n      }\n\n      if (emailerror || passwerror) {\n            this.setState({emailerror,passwerror});\n            return false;\n            }\n      return true\n\n    }\n\n  redirection =()=>(\n\n      <Redirect to='/Home ' />\n\n  )\n\n\n\n  sendingdata =()=>{\n        customerservices.login({\n          'username' : this.state.Email,\n          'password' : this.state.passw\n        }).then(res => {\n            const token = res.data.token // you should firstly fetch the token from the data to be known\n            localStorage.setItem('id_token', token) // Store token\n        }).then((result)=> {\n          console.log(result);\n          alert(\"Loggedin\");\n        }).catch((error)=>{\n          console.log(error);\n          alert(\"This email already exists\")\n        });\n        this.redirection();\n\n\n}\n  submithandle=(e)=>{\n    e.preventDefault();\n    let validate = this.validation();\n    if (validate) {\n\n      this.setState({emailerror:\"\"})\n      this.setState({passwerror:\"\"})}\n    if (this.state.Email.length>1 && this.state.passw.length>1){\n        this.sendingdata();\n\n      }\n\n\n\n\n\n\n\n}\n\n\n\n\n  render(){\n\n    const token = localStorage.getItem(\"id_token\")\n\n    return(\n\n       <form onSubmit={this.submithandle}>\n          <Header />\n\n            <div className='Container'>\n            <h className='h_login'> Login </h>\n            <h className='h_slash'> / </h>\n            <h className='h_register'>\n                  <a className='a'href='register'>Register</a>\n            </h>\n            <br/>\n            <br/>\n\n               <p> Email </p>\n\n                  <input\n                      className=\"Input\"\n                      type=\"text\"\n                      value={this.state.Email}\n                      onChange={this.emailhandler}/>\n               <div style={{color: \"red\"}}> {this.state.emailerror}</div>\n               <br/>\n\n\n                <p> Password </p>\n                   <input\n                       className=\"Input\"\n                       type=\"Password\"\n                       value={this.state.Passw}\n                       onChange={this.passwhandler}/>\n               <div style={{color: \"red\"}}> {this.state.passwerror}</div>\n\n               <div className='button'>\n\n                     { !token ? <button class=\"ui inverted orange button\">\n                           Login\n                     </button> : <Button converted color='orange' disabled>\n                           Login\n                     </Button> }\n\n               </div>\n\n             </div>\n             <div className='Footer2'>\n              <Footer/>\n              </div>\n            </form>\n    )\n  }\n}\n"]},"metadata":{},"sourceType":"module"}