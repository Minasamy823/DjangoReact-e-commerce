import callable from './callable';

/**
 * Returns a string of HTML classes.
 * Renders one or many component styles (objects of component parts) to the DOM.
 */
var getClasses = function getClasses(renderer, componentStyles, styleParam) {
  // root, icon, etc.
  var componentParts = Object.keys(componentStyles); // Fela plugins rely on `direction` param in `theme` prop instead of RTL
  // Our API should be aligned with it
  // Heads Up! Keep in sync with Design.tsx render logic

  var direction = styleParam.rtl ? 'rtl' : 'ltr';
  var mergedStyleParam = Object.assign({}, styleParam, {
    theme: Object.assign({}, styleParam.theme, {
      direction: direction
    })
  });
  return componentParts.reduce(function (classes, partName) {
    classes[partName] = renderer.renderRule(callable(componentStyles[partName]), mergedStyleParam);
    return classes;
  }, {});
};

export default getClasses;